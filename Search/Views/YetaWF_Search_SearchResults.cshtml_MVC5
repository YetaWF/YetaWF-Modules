@*Copyright © 2018 Softel vdm, Inc. - https://yetawf.com/Documentation/YetaWF/Search#License*@
@inherits YetaWF.Core.Views.RazorView<YetaWF.Modules.Search.Modules.SearchResultsModule, YetaWF.Modules.Search.Controllers.SearchResultsModuleController.Model>
@using YetaWF.Core.Localize
@using YetaWF.Core.Support
@if (Model.SearchResults.Count == 0) {
    if (Manager.EditMode) {
        <div class='t_summary t_none'>@__ResStr("noResultsAdmin", "No search results available.")</div>
    } else {
        <div class='t_summary t_none'>@__ResStr("noResults", "Your search for \"{0}\" did not match any documents.", Model.SearchTerms)</div>
    }
} else {
    if (Model.MoreResults) {
        if (Model.SearchResults.Count > 1) {
            <div class='t_summary t_results'>@__ResStr("resultsMore", "Your search for \"{0}\" found {1} matches - more are available.", Model.SearchTerms, Model.SearchResults.Count)</div>
        } else {
            <div class='t_summary t_results'>@__ResStr("resultsMore1", "Your search for \"{0}\" found {1} match - more are available.", Model.SearchTerms, Model.SearchResults.Count)</div>
        }
    } else {
        if (Model.SearchResults.Count > 1) {
            <div class='t_summary t_results'>@__ResStr("results", "Your search for \"{0}\" found {1} matches.", Model.SearchTerms, Model.SearchResults.Count)</div>
        } else {
            <div class='t_summary t_results'>@__ResStr("results1", "Your search for \"{0}\" found {1} match.", Model.SearchTerms, Model.SearchResults.Count)</div>
        }
    }
    <div class="t_list">
        @Html.ForDisplayAsync(Model, "SearchTerms").Result
        @{ int count = 0; }
        @foreach (YetaWF.Modules.Search.DataProvider.SearchResult data in Model.SearchResults) {
            string row = string.Format("t_r{0}", count);
            string url = Manager.CurrentSite.MakeUrl(data.PageUrl, data.PageSecurity);
            string urlKwds = QueryHelper.ToUrl(url, Model.QSArgs);// add search kwds
            <div class="t_entry @row">
                <div class='t_desc @row'>
                    @if (!string.IsNullOrWhiteSpace(data.Description)) {
                        <a href="@urlKwds" target="_blank" rel="noopener noreferrer">@data.Description</a>
                    } else {
                        <a href="@urlKwds" target="_blank" rel="noopener noreferrer">@__ResStr("noDesc", "(No Description)")</a>
                    }
                </div>
                @if (Model.ShowSummary && !string.IsNullOrWhiteSpace(data.PageSummary)) {
                    <div class='t_symmary @row'>
                        @data.PageSummary
                    </div>
                }
                @if (Model.ShowUrl) {
                    <div class='t_url @row'>
                        @url
                    </div>
                }
                @{
                    DateTime modified = data.DateCreated;
                    if (data.DateUpdated != null) { modified = (DateTime)data.DateUpdated; }
                    if (modified != DateTime.MinValue) {
                        <div class='t_updated @row'>
                            @__ResStr("lastUpd", "Updated {0}", Formatting.FormatDateTime(modified))
                        </div>
                    }
                }
            </div>
            ++count;
        }
    </div>
}