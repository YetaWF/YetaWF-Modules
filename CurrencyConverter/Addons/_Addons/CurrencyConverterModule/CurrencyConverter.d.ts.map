{"version":3,"sources":["Addons/YetaWF/CurrencyConverter/_Addons/CurrencyConverterModule/CurrencyConverter.ts"],"names":[],"mappings":"AAEA,kBAAU,MAAM,CAAC;IACb,UAAiB,KAAK;QAClB,wBAAwB,EAAE,wBAAwB,CAAC,YAAY,CAAC;KACnE;CACJ;AACD,kBAAU,wBAAwB,CAAC;IAC/B,UAAiB,YAAY;KAE5B;CACJ;AAED,UAAU,IAAI;IACV,YAAY,EAAE,MAAM,CAAC;IACrB,IAAI,EAAE,MAAM,CAAC;IACb,IAAI,EAAE,MAAM,CAAC;CAChB;AAED,OAAO,CAAC,IAAI,8BAA8B,EAAE,IAAI,EAAE,CAAC;AAEnD,kBAAU,wBAAwB,CAAC;IAE/B,UAAiB,YAAY;QACzB,SAAS,EAAE,MAAM,CAAC;KACrB;CAmCJ","file":"CurrencyConverter.d.ts","sourcesContent":["/* Copyright ï¿½ 2019 Softel vdm, Inc. - https://yetawf.com/Documentation/YetaWF/CurrencyConverter#License */\r\n\r\nnamespace YetaWF {\r\n    export interface ILocs {\r\n        YetaWF_CurrencyConverter: YetaWF_CurrencyConverter.IPackageLocs;\r\n    }\r\n}\r\nnamespace YetaWF_CurrencyConverter {\r\n    export interface IPackageLocs {\r\n\r\n    }\r\n}\r\n\r\ninterface Rate {\r\n    CurrencyName: string;\r\n    Code: string;\r\n    Rate: number;\r\n}\r\n\r\ndeclare var YetaWF_CurrencyConverter_Rates: Rate[];\r\n\r\nnamespace YetaWF_CurrencyConverter {\r\n\r\n    export interface IPackageLocs {\r\n        FmtResult: string;\r\n    }\r\n\r\n    class Converter {\r\n        public static findrate(code: string): Rate {\r\n            for (let rate of YetaWF_CurrencyConverter_Rates) {\r\n                if (rate.Code === code) return rate;\r\n            }\r\n            throw \"Country code \" + code + \" is not available\";/*DEBUG*/\r\n        }\r\n    }\r\n\r\n    $YetaWF.registerEventHandlerDocument(\"click\", \".YetaWF_CurrencyConverter_CurrencyConverter input[name='convert']\", (ev: MouseEvent): boolean => {\r\n\r\n        var buttonClick = ev.__YetaWFElem;\r\n\r\n        var divConverter = $YetaWF.elementClosest(buttonClick, \".t_converter\");\r\n\r\n        var fromSelect = $YetaWF.getElement1BySelector(\"select[name='FromCountry']\", [divConverter]) as HTMLSelectElement;\r\n        var toSelect = $YetaWF.getElement1BySelector(\"select[name='ToCountry']\", [divConverter]) as HTMLSelectElement;\r\n        var amountInput = $YetaWF.getElement1BySelector(\"input[name='Amount']\", [divConverter]) as HTMLInputElement;\r\n        var resultFrom = $YetaWF.getElement1BySelector(\".t_result_from\", [divConverter]) as HTMLDivElement;\r\n        var resultTo = $YetaWF.getElement1BySelector(\".t_result_to\", [divConverter]) as HTMLDivElement;\r\n        var resultIs = $YetaWF.getElement1BySelector(\".t_result_is\", [divConverter]) as HTMLDivElement;\r\n\r\n        var fromRate = Converter.findrate(fromSelect.value);\r\n        var toRate = Converter.findrate(toSelect.value);\r\n\r\n        var amount = Number(amountInput.value) * toRate.Rate / fromRate.Rate;\r\n        resultFrom.innerText = YLocs.YetaWF_CurrencyConverter.FmtResult.format(amountInput.value, fromRate.Code, fromSelect.options[fromSelect.selectedIndex].innerText);\r\n        resultTo.innerText = YLocs.YetaWF_CurrencyConverter.FmtResult.format(amount.toFixed(2), toRate.Code, toSelect.options[toSelect.selectedIndex].innerText);\r\n\r\n        resultIs.style.visibility = \"visible\";\r\n\r\n        return false;\r\n    });\r\n}"]}