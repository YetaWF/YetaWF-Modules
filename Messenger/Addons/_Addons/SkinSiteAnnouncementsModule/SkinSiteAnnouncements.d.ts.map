{"version":3,"sources":["Addons/YetaWF/Messenger/_Addons/SkinSiteAnnouncementsModule/SkinSiteAnnouncements.ts"],"names":[],"mappings":"AAEA,kBAAU,gBAAgB,CAAC;IAEvB,MAAa,2BAA2B;QAEpC,MAAM,CAAC,QAAQ,CAAC,UAAU,EAAE,MAAM,CAA0C;QAC5E,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,MAAM,CAA2C;QAExE,MAAM,CAAC,EAAE,EAAE,OAAO,CAAQ;;QAkC1B,OAAO,CAAC,aAAa;KAIxB;CACJ","file":"SkinSiteAnnouncements.d.ts","sourcesContent":["/* Copyright Â© 2019 Softel vdm, Inc. - https://yetawf.com/Documentation/YetaWF/Messenger#License */\r\n\r\nnamespace YetaWF_Messenger {\r\n\r\n    export class SkinSiteAnnouncementsModule {\r\n\r\n        static readonly MODULEGUID: string = \"54F6B691-B835-4568-90AA-AA9B308D4272\";\r\n        static readonly PROXY: string = \"YetaWF_Messenger_SiteAnnouncementsHub\";\r\n\r\n        static on: boolean = true;\r\n\r\n        constructor() {\r\n\r\n            if (YConfigs.SignalR.Version === \"MVC5\") {\r\n                var $$: any = $;\r\n                var connection: any = $$.hubConnection(YConfigs.SignalR.Url, { useDefaultPath: false });\r\n                var hubProxy: any = connection.createHubProxy(SkinSiteAnnouncementsModule.PROXY);\r\n\r\n                hubProxy.on(\"Message\", (content: string, title: string): void => {\r\n                    this.handleMessage(content, title);\r\n                });\r\n\r\n                connection.start().done((): void => { /*empty*/ });\r\n            } else {\r\n\r\n                const connection = new signalR.HubConnectionBuilder()\r\n                    .withUrl(`${YConfigs.SignalR.Url}/${SkinSiteAnnouncementsModule.PROXY}`)\r\n                    .configureLogging(signalR.LogLevel.Information)\r\n                    .build();\r\n\r\n                connection.on(\"Message\", (content: string, title: string): void => {\r\n                    this.handleMessage(content, title);\r\n                });\r\n\r\n                connection.start().then((): void => { /*empty*/ });\r\n            }\r\n\r\n            $YetaWF.registerContentChange((addonGuid: string, on: boolean): void => {\r\n                if (addonGuid === SkinSiteAnnouncementsModule.MODULEGUID) {\r\n                    SkinSiteAnnouncementsModule.on = on;\r\n                }\r\n            });\r\n        }\r\n        private handleMessage(content: string, title: string): void {\r\n            if (SkinSiteAnnouncementsModule.on)\r\n                $YetaWF.alert(content, title, undefined, { encoded: true });\r\n        }\r\n    }\r\n}\r\n"]}