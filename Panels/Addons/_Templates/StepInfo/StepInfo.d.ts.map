{"version":3,"sources":["Addons/YetaWF/Panels/_Templates/StepInfo/StepInfo.ts"],"names":[],"mappings":"AAEA,kBAAU,aAAa,CAAC;IAEpB,UAAiB,WAAW;QACxB,IAAI,EAAE,MAAM,CAAC;QACb,GAAG,CAAC,EAAE,MAAM,CAAC;KAChB;IAED,MAAa,iBAAkB,SAAQ,MAAM,CAAC,qBAAqB;QAE/D,gBAAuB,QAAQ,EAAE,MAAM,CAAmC;oBAE9D,SAAS,EAAE,MAAM;eAIf,SAAS,CAAC,MAAM,EAAE,WAAW,GAAG,IAAI;eAQpC,YAAY,CAAC,KAAK,EAAE,MAAM,EAAE,GAAG,IAAI;eAQnC,aAAa,CAAC,KAAK,EAAE,MAAM,EAAE,GAAG,IAAI;eAQpC,UAAU,CAAC,OAAO,EAAE,WAAW,EAAE,GAAG,IAAI;eAOxC,QAAQ,IAAI,IAAI;QAUvB,KAAK,IAAI,IAAI;QAQb,QAAQ,CAAC,MAAM,EAAE,WAAW,GAAG,IAAI;QAMnC,WAAW,CAAC,KAAK,EAAE,MAAM,EAAE,GAAG,IAAI;QAalC,YAAY,CAAC,KAAK,EAAE,MAAM,EAAE,GAAG,IAAI;QAQnC,MAAM,CAAC,OAAO,EAAE,WAAW,EAAE,GAAG,IAAI;KAU9C;CAMJ","file":"StepInfo.d.ts","sourcesContent":["/* Copyright Â© 2019 Softel vdm, Inc. - https://yetawf.com/Documentation/YetaWF/Panels#License */\r\n\r\nnamespace YetaWF_Panels {\r\n\r\n    export interface StepOptions {\r\n        Name: string;\r\n        Url?: string; // only used for enable calls to set Url to link to\r\n    }\r\n\r\n    export class StepInfoComponent extends YetaWF.ComponentBaseDataImpl {\r\n\r\n        public static readonly SELECTOR: string = \".yt_panels_stepinfo.t_display\";\r\n\r\n        constructor(controlId: string) {\r\n            super(controlId);\r\n        }\r\n\r\n        public static setActive(option: StepOptions): void {\r\n            var stepCtrls = $YetaWF.getElementsBySelector(StepInfoComponent.SELECTOR);\r\n            for (let stepCtrl of stepCtrls) {\r\n                var control = YetaWF.ComponentBaseDataImpl.getControlFromTag<StepInfoComponent>(stepCtrl, StepInfoComponent.SELECTOR);\r\n                control.clear();\r\n                control.activate(option);\r\n            }\r\n        }\r\n        public static setAllActive(names: string[]): void {\r\n            var stepCtrls = $YetaWF.getElementsBySelector(StepInfoComponent.SELECTOR);\r\n            for (let stepCtrl of stepCtrls) {\r\n                var control = YetaWF.ComponentBaseDataImpl.getControlFromTag<StepInfoComponent>(stepCtrl, StepInfoComponent.SELECTOR);\r\n                control.clear();\r\n                control.activateAll(names);\r\n            }\r\n        }\r\n        public static setLastActive(names: string[]): void {\r\n            var stepCtrls = $YetaWF.getElementsBySelector(StepInfoComponent.SELECTOR);\r\n            for (let stepCtrl of stepCtrls) {\r\n                var control = YetaWF.ComponentBaseDataImpl.getControlFromTag<StepInfoComponent>(stepCtrl, StepInfoComponent.SELECTOR);\r\n                control.clear();\r\n                control.activateLast(names);\r\n            }\r\n        }\r\n        public static setEnabled(options: StepOptions[]): void {\r\n            var stepCtrls = $YetaWF.getElementsBySelector(StepInfoComponent.SELECTOR);\r\n            for (let stepCtrl of stepCtrls) {\r\n                var control = YetaWF.ComponentBaseDataImpl.getControlFromTag<StepInfoComponent>(stepCtrl, StepInfoComponent.SELECTOR);\r\n                control.enable(options);\r\n            }\r\n        }\r\n        public static clearAll(): void {\r\n            var stepCtrls = $YetaWF.getElementsBySelector(StepInfoComponent.SELECTOR);\r\n            for (let stepCtrl of stepCtrls) {\r\n                var control = YetaWF.ComponentBaseDataImpl.getControlFromTag<StepInfoComponent>(stepCtrl, StepInfoComponent.SELECTOR);\r\n                control.clear();\r\n            }\r\n        }\r\n\r\n        // API\r\n\r\n        public clear(): void {\r\n            var steps = $YetaWF.getElementsBySelector(`a.t_step.t_active,a.t_step.t_enabled`) as HTMLAnchorElement[];\r\n            for (let step of steps) {\r\n                $YetaWF.elementRemoveClass(step, \"t_active\");\r\n                $YetaWF.elementRemoveClass(step, \"t_enabled\");\r\n                step.removeAttribute(\"href\");\r\n            }\r\n        }\r\n        public activate(option: StepOptions): void {\r\n            var steps = $YetaWF.getElementsBySelector(`a[data-name=${option.Name}].t_step`, [this.Control]) as HTMLAnchorElement[];\r\n            for (let step of steps) {\r\n                $YetaWF.elementAddClass(step, \"t_active\");\r\n            }\r\n        }\r\n        public activateAll(names: string[]): void {\r\n            for (let name of names) {\r\n                var steps = $YetaWF.getElementsBySelector(`a[data-name^=${name}].t_step`, [this.Control]) as HTMLAnchorElement[];\r\n                var count = 0;\r\n                for (let step of steps) {\r\n                    if (count >= steps.length - 1)\r\n                        $YetaWF.elementAddClass(step, \"t_active\");\r\n                    else\r\n                        $YetaWF.elementAddClass(step, \"t_enabled\");\r\n                    ++count;\r\n                }\r\n            }\r\n        }\r\n        public activateLast(names: string[]): void {\r\n            for (let name of names) {\r\n                var steps = $YetaWF.getElementsBySelector(`a[data-name^=${name}].t_step`, [this.Control]) as HTMLAnchorElement[];\r\n                if (steps.length > 0) {\r\n                    $YetaWF.elementAddClass(steps[steps.length-1], \"t_active\");\r\n                }\r\n            }\r\n        }\r\n        public enable(options: StepOptions[]): void {\r\n            for (let option of options) {\r\n                var steps = $YetaWF.getElementsBySelector(`a[data-name=${option.Name}].t_step`, [this.Control]) as HTMLAnchorElement[];\r\n                for (let step of steps) {\r\n                    $YetaWF.elementAddClass(step, \"t_enabled\");\r\n                    if (option.Url)\r\n                        step.href = option.Url;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // A <div> is being emptied. Destroy all steps the <div> may contain.\r\n    $YetaWF.registerClearDiv((tag: HTMLElement): void => {\r\n        StepInfoComponent.clearDiv(tag, StepInfoComponent.SELECTOR);\r\n    });\r\n}"]}