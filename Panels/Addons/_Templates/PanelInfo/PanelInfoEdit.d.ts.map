{"version":3,"sources":["Addons/YetaWF/Panels/_Templates/PanelInfo/PanelInfoEdit.ts"],"names":[],"mappings":"AAEA,kBAAU,aAAa,CAAC;IAEpB,UAAiB,YAAY;QACzB,kBAAkB,EAAE,MAAM,CAAC;QAC3B,gBAAgB,EAAE,MAAM,CAAC;KAC5B;IAED,MAAa,sBAAuB,SAAQ,MAAM,CAAC,qBAAqB;QAEpE,gBAAuB,QAAQ,EAAE,MAAM,CAAiC;QACxE,OAAc,YAAY,EAAE,MAAM,CAA6B;QAE/D,OAAO,CAAC,EAAE,CAAmB;QAC7B,OAAO,CAAC,IAAI,CAAmB;QAC/B,OAAO,CAAC,MAAM,CAAmB;QACjC,OAAO,CAAC,KAAK,CAAmB;QAChC,OAAO,CAAC,MAAM,CAAmB;QACjC,OAAO,CAAC,GAAG,CAAmB;oBAElB,SAAS,EAAE,MAAM;QA6C7B,OAAO,CAAC,aAAa;QAIrB,OAAO,CAAC,aAAa;QAId,aAAa,IAAI,IAAI;KAM/B;CAiCJ","file":"PanelInfoEdit.d.ts","sourcesContent":["/* Copyright Â© 2019 Softel vdm, Inc. - https://yetawf.com/Documentation/YetaWF/Panels#License */\r\n\r\nnamespace YetaWF_Panels {\r\n\r\n    export interface IPackageLocs {\r\n        RemovePanelConfirm: string;\r\n        RemovePanelTitle: string;\r\n    }\r\n\r\n    export class PanelInfoEditComponent extends YetaWF.ComponentBaseDataImpl {\r\n\r\n        public static readonly SELECTOR: string = \".yt_panels_panelinfo.t_edit\";\r\n        public static TEMPLATENAME: string = \"YetaWF_Panels_PanelInfo\";\r\n\r\n        private Up: HTMLInputElement;\r\n        private Down: HTMLInputElement;\r\n        private Delete: HTMLInputElement;\r\n        private Apply: HTMLInputElement;\r\n        private Insert: HTMLInputElement;\r\n        private Add: HTMLInputElement;\r\n\r\n        constructor(controlId: string) {\r\n            super(controlId);\r\n\r\n            this.Up = $YetaWF.getElement1BySelector(\"input.t_up\", [this.Control]) as HTMLInputElement;\r\n            this.Down = $YetaWF.getElement1BySelector(\"input.t_down\", [this.Control]) as HTMLInputElement;\r\n            this.Delete = $YetaWF.getElement1BySelector(\"input.t_delete\", [this.Control]) as HTMLInputElement;\r\n            this.Apply = $YetaWF.getElement1BySelector(\"input.t_apply\", [this.Control]) as HTMLInputElement;\r\n            this.Insert = $YetaWF.getElement1BySelector(\"input.t_ins\", [this.Control]) as HTMLInputElement;\r\n            this.Add = $YetaWF.getElement1BySelector(\"input.t_add\", [this.Control]) as HTMLInputElement;\r\n\r\n            this.updateButtons();\r\n\r\n            // Apply button click\r\n            $YetaWF.registerEventHandler(this.Apply, \"click\", null, (ev: MouseEvent): boolean => {\r\n                $YetaWF.Forms.submitTemplate(this.Control, true, PanelInfoEditComponent.TEMPLATENAME, YConfigs.YetaWF_Panels.Action_Apply, this.getPanelIndex().toString());\r\n                return false;\r\n            });\r\n            // << button click\r\n            $YetaWF.registerEventHandler(this.Up, \"click\", null, (ev: MouseEvent): boolean => {\r\n                $YetaWF.Forms.submitTemplate(this.Control, true, PanelInfoEditComponent.TEMPLATENAME, YConfigs.YetaWF_Panels.Action_MoveLeft, this.getPanelIndex().toString());\r\n                return false;\r\n            });\r\n            // >> button click\r\n            $YetaWF.registerEventHandler(this.Down, \"click\", null, (ev: MouseEvent): boolean => {\r\n                $YetaWF.Forms.submitTemplate(this.Control, true, PanelInfoEditComponent.TEMPLATENAME, YConfigs.YetaWF_Panels.Action_MoveRight, this.getPanelIndex().toString());\r\n                return false;\r\n            });\r\n            // delete button click\r\n            $YetaWF.registerEventHandler(this.Delete, \"click\", null, (ev: MouseEvent): boolean => {\r\n                $YetaWF.alertYesNo(YLocs.YetaWF_Panels.RemovePanelConfirm, YLocs.YetaWF_Panels.RemovePanelTitle, (): void => {\r\n                    $YetaWF.Forms.submitTemplate(this.Control, false, PanelInfoEditComponent.TEMPLATENAME, YConfigs.YetaWF_Panels.Action_Remove, this.getPanelIndex().toString());\r\n                });\r\n                return false;\r\n            });\r\n            // Insert button click\r\n            $YetaWF.registerEventHandler(this.Insert, \"click\", null, (ev: MouseEvent): boolean => {\r\n                $YetaWF.Forms.submitTemplate(this.Control, true, PanelInfoEditComponent.TEMPLATENAME, YConfigs.YetaWF_Panels.Action_Insert, this.getPanelIndex().toString());\r\n                return false;\r\n            });\r\n            // Add button click\r\n            $YetaWF.registerEventHandler(this.Add, \"click\", null, (ev: MouseEvent): boolean => {\r\n                $YetaWF.Forms.submitTemplate(this.Control, true, PanelInfoEditComponent.TEMPLATENAME, YConfigs.YetaWF_Panels.Action_Add, this.getPanelIndex().toString());\r\n                return false;\r\n            });\r\n        }\r\n        private getPanelIndex(): number {\r\n            var tabActive = $YetaWF.getElement1BySelector(\"input[name$='_ActiveTab']\", [this.Control]) as HTMLInputElement;\r\n            return Number(tabActive.value);\r\n        }\r\n        private getPanelCount(): number {\r\n            var tabs = $YetaWF.getElementsBySelector(\".t_tabstrip li\", [this.Control]);\r\n            return tabs.length;\r\n        }\r\n        public updateButtons(): void {\r\n            var panelIndex = this.getPanelIndex();\r\n            $YetaWF.elementEnableToggle(this.Up, panelIndex !== 0);\r\n            $YetaWF.elementEnableToggle(this.Down, panelIndex < this.getPanelCount() - 1);\r\n            $YetaWF.elementEnableToggle(this.Delete, this.getPanelCount() > 1);\r\n        }\r\n    }\r\n\r\n    $YetaWF.registerPanelSwitched((panel: HTMLElement): void => {\r\n        var panelInfo = YetaWF.ComponentBaseDataImpl.getControlFromTagCond<PanelInfoEditComponent>(panel, PanelInfoEditComponent.SELECTOR);\r\n        if (!panelInfo) return;\r\n        var tabActive = $YetaWF.getElement1BySelector(\"input[name$='_ActiveTab']\", [panelInfo.Control]) as HTMLInputElement;\r\n        tabActive.value = $YetaWF.getAttribute(panel, \"data-tab\");\r\n        panelInfo.updateButtons();\r\n    });\r\n\r\n    // A <div> is being emptied. Destroy all panels the <div> may contain.\r\n    $YetaWF.registerClearDiv((tag: HTMLElement): void => {\r\n        // tabs\r\n        var list = $YetaWF.getElementsBySelector(\".yt_panels_panelinfo .t_panels.t_acctabs\", [tag]);\r\n        for (let el of list) {\r\n            var tabs = $(el);\r\n            if (tabs) tabs.tabs(\"destroy\"); //jQuery-ui use\r\n        }\r\n        // jquery ui accordion\r\n        var list = $YetaWF.getElementsBySelector(\".yt_panels_panelinfo .t_panels.t_accjquery\", [tag]);\r\n        for (let el of list) {\r\n            var accordion = $(el);\r\n            if (accordion) accordion.accordion(\"destroy\"); //jQuery-ui use\r\n        }\r\n        // kendo accordion\r\n        var list = $YetaWF.getElementsBySelector(\".yt_panels_panelinfo .t_panels.t_acckendo\", [tag]);\r\n        for (let el of list) {\r\n            var panelBar = $(el).data(\"kendoPanelBar\");\r\n            if (panelBar) panelBar.destroy();\r\n        }\r\n\r\n        PanelInfoEditComponent.clearDiv(tag, PanelInfoEditComponent.SELECTOR);\r\n    });\r\n}"]}