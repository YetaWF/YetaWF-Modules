{"version":3,"sources":["AddOns/YetaWF/ComponentsHTML/_Templates/DayTimeRange/DayTimeRange.ts"],"names":[],"mappings":"AAEA,kBAAU,qBAAqB,CAAC;IAE5B,MAAa,qBAAqB;QAE9B,OAAO,CAAC,OAAO,CAAc;QAC7B,OAAO,CAAC,UAAU,CAAmB;QACrC,OAAO,CAAC,MAAM,CAAiB;QAC/B,OAAO,CAAC,MAAM,CAAmB;QACjC,OAAO,CAAC,SAAS,CAAiB;QAClC,OAAO,CAAC,QAAQ,CAAiB;QACjC,OAAO,CAAC,MAAM,CAAiB;QAC/B,OAAO,CAAC,SAAS,CAAiB;QAClC,OAAO,CAAC,OAAO,CAAiB;QAChC,OAAO,CAAC,KAAK,CAAmB;QAChC,OAAO,CAAC,GAAG,CAAmB;QAC9B,OAAO,CAAC,MAAM,CAAmB;QACjC,OAAO,CAAC,IAAI,CAAmB;oBAEnB,SAAS,EAAE,MAAM;QA4B7B,OAAO,CAAC,QAAQ,CAAmF;QAEnG,OAAO,CAAC,YAAY;KAgCvB;CACJ","file":"DayTimeRange.d.ts","sourcesContent":["/* Copyright Â© 2019 Softel vdm, Inc. - https://yetawf.com/Documentation/YetaWF/ComponentsHTML#License */\r\n\r\nnamespace YetaWF_ComponentsHTML {\r\n\r\n    export class DayTimeRangeComponent {\r\n\r\n        private Control: HTMLElement;\r\n        private Additional: HTMLInputElement;\r\n        private AddDiv: HTMLDivElement;\r\n        private Closed: HTMLInputElement;\r\n        private ClosedDiv: HTMLDivElement;\r\n        private StartDiv: HTMLDivElement;\r\n        private EndDiv: HTMLDivElement;\r\n        private Start2Div: HTMLDivElement;\r\n        private End2Div: HTMLDivElement;\r\n        private Start: HTMLInputElement;\r\n        private End: HTMLInputElement;\r\n        private Start2: HTMLInputElement;\r\n        private End2: HTMLInputElement;\r\n\r\n        constructor(controlId: string) {\r\n            this.Control = $YetaWF.getElementById(controlId);\r\n            this.Additional = $YetaWF.getElement1BySelector(\"input[name$='.Additional']\", [this.Control]) as HTMLInputElement;\r\n            this.AddDiv = $YetaWF.getElement1BySelector(\".t_add\", [this.Control]) as HTMLDivElement;\r\n            this.Closed = $YetaWF.getElement1BySelector(\"input[name$='.Closed']\", [this.Control]) as HTMLInputElement;\r\n            this.ClosedDiv = $YetaWF.getElement1BySelector(\".t_closed\", [this.Control]) as HTMLDivElement;\r\n            this.StartDiv = $YetaWF.getElement1BySelector(\".t_from\", [this.Control]) as HTMLDivElement;\r\n            this.EndDiv = $YetaWF.getElement1BySelector(\".t_to\", [this.Control]) as HTMLDivElement;\r\n            this.Start2Div = $YetaWF.getElement1BySelector(\".t_from2\", [this.Control]) as HTMLDivElement;\r\n            this.End2Div = $YetaWF.getElement1BySelector(\".t_to2\", [this.Control]) as HTMLDivElement;\r\n\r\n            this.Start = $YetaWF.getElement1BySelector(\"input[name$='.Start']\", [this.Control]) as HTMLInputElement;\r\n            this.End = $YetaWF.getElement1BySelector(\"input[name$='.End']\", [this.Control]) as HTMLInputElement;\r\n            this.Start2 = $YetaWF.getElement1BySelector(\"input[name$='.Start2']\", [this.Control]) as HTMLInputElement;\r\n            this.End2 = $YetaWF.getElement1BySelector(\"input[name$='.End2']\", [this.Control]) as HTMLInputElement;\r\n\r\n            this.toggleRanges();\r\n\r\n            $YetaWF.registerEventHandler(this.Additional, \"change\", null, (ev: Event): boolean => {\r\n                this.toggleRanges();\r\n                return false;\r\n            });\r\n            $YetaWF.registerEventHandler(this.Closed, \"change\", null, (ev: Event): boolean => {\r\n                this.toggleRanges();\r\n                return false;\r\n            });\r\n        }\r\n\r\n        private NoSubmit: string = `${YConfigs.Forms.CssFormNoSubmit} ${YConfigs.Forms.CssFormNoValidate}`;\r\n\r\n        private toggleRanges(): void {\r\n            if (this.Closed.checked) {\r\n                this.StartDiv.style.display = \"none\";\r\n                this.EndDiv.style.display = \"none\";\r\n                this.Start2Div.style.display = \"none\";\r\n                this.End2Div.style.display = \"none\";\r\n                this.AddDiv.style.display = \"none\";\r\n                $YetaWF.elementAddClasses(this.Start, this.NoSubmit);\r\n                $YetaWF.elementAddClasses(this.End, this.NoSubmit);\r\n                $YetaWF.elementAddClasses(this.Start2, this.NoSubmit);\r\n                $YetaWF.elementAddClasses(this.End2, this.NoSubmit);\r\n            } else {\r\n                this.StartDiv.style.display = \"\";\r\n                this.EndDiv.style.display = \"\";\r\n                this.AddDiv.style.display = \"\";\r\n                $YetaWF.elementRemoveClasses(this.Start, this.NoSubmit);\r\n                $YetaWF.elementRemoveClasses(this.End, this.NoSubmit);\r\n                if (this.Additional.checked) {\r\n                    this.Start2Div.style.display = \"\";\r\n                    this.End2Div.style.display = \"\";\r\n                    $YetaWF.elementRemoveClasses(this.Start2, this.NoSubmit);\r\n                    $YetaWF.elementRemoveClasses(this.End2, this.NoSubmit);\r\n                    this.ClosedDiv.style.display = \"none\";\r\n                } else {\r\n                    this.Start2Div.style.display = \"none\";\r\n                    this.End2Div.style.display = \"none\";\r\n                    $YetaWF.elementAddClasses(this.Start2, this.NoSubmit);\r\n                    $YetaWF.elementAddClasses(this.End2, this.NoSubmit);\r\n                    this.ClosedDiv.style.display = \"\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n$.validator.unobtrusive.adapters.add(\"daytimerangeto\", (options: any): void => {\r\n    options.rules[\"daytimerangeto\"] = {};\r\n    options.messages[\"daytimerangeto\"] = options.message;\r\n});\r\n\r\n$.validator.addMethod(\"daytimerangeto\", (value: any, element: HTMLElement, parameters: any): boolean => {\r\n\r\n    if ($YetaWF.elementHasClass(element, YConfigs.Forms.CssFormNoValidate)) return true;\r\n\r\n    const elem = element as HTMLInputElement;\r\n    const isRange1 = $YetaWF.elementClosestCond(elem, \".t_to\") != null;\r\n    const control = $YetaWF.elementClosestCond(elem, \".yt_daytimerange\");\r\n    if (control == null) return false;\r\n\r\n    var fromRange: HTMLInputElement;\r\n    if (isRange1)\r\n        fromRange = $YetaWF.getElement1BySelector(\"input[name$='.Start']\", [control]) as HTMLInputElement;\r\n    else\r\n        fromRange = $YetaWF.getElement1BySelector(\"input[name$='.Start2']\", [control]) as HTMLInputElement;\r\n    try {\r\n        const dtTo = new Date(elem.value);\r\n        const dtFrom  = new Date(fromRange.value);\r\n        if (dtTo >= dtFrom) return true;\r\n    } finally { }\r\n\r\n    return false;\r\n});\r\n\r\n$.validator.unobtrusive.adapters.add(\"daytimerangefrom2\", (options: any): void => {\r\n    options.rules[\"daytimerangefrom2\"] = {};\r\n    options.messages[\"daytimerangefrom2\"] = options.message;\r\n});\r\n\r\n$.validator.addMethod(\"daytimerangefrom2\", (value: any, element: HTMLElement, parameters: any): boolean => {\r\n\r\n    if ($YetaWF.elementHasClass(element, YConfigs.Forms.CssFormNoValidate)) return true;\r\n\r\n    const elem = element as HTMLInputElement;\r\n    const control = $YetaWF.elementClosestCond(elem, \".yt_daytimerange\");\r\n    if (control == null) return false;\r\n\r\n    const endRange1 = $YetaWF.getElement1BySelector(\"input[name$='.End']\", [control]) as HTMLInputElement;\r\n    try {\r\n        const dtFrom2 = new Date(elem.value);\r\n        const dtTo1 = new Date(endRange1.value);\r\n        if (dtFrom2 >= dtTo1) return true;\r\n    } finally { }\r\n\r\n    return false;\r\n});\r\n\r\n"]}