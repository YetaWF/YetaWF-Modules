{"version":3,"sources":["Addons/YetaWF/ComponentsHTML/_Templates/DateTime/DateTimeEdit.ts"],"names":[],"mappings":";AAEA,kBAAU,qBAAqB,CAAC;IAE5B,UAAiB,iBAAiB;QAC9B,cAAc,EAAE,MAAM,CAAC;KAC1B;IAED,UAAU,iBAAiB;QACvB,GAAG,EAAE,IAAI,CAAC;QACV,GAAG,EAAE,IAAI,CAAC;KACb;IAED,MAAa,qBAAsB,SAAQ,MAAM,CAAC,qBAAqB;QAEnE,gBAAuB,QAAQ,EAAE,MAAM,CAAyB;QAEhE,MAAM,EAAE,gBAAgB,CAAC;QACzB,IAAI,EAAE,gBAAgB,CAAC;QACvB,mBAAmB,EAAE,KAAK,CAAC,EAAE,CAAC,cAAc,CAAC;oBAEjC,SAAS,EAAE,MAAM,EAAE,KAAK,EAAE,iBAAiB;QAiCvD,OAAO,CAAC,SAAS;QAMjB,OAAO,CAAC,aAAa;QAGjB,KAAK,EAAI,IAAI;iBAGb,SAAS,EAAI,MAAM;QAOhB,KAAK,IAAI,IAAI;QAIb,MAAM,CAAC,OAAO,EAAE,OAAO,GAAG,IAAI;KAGxC;CAQJ","file":"DateTimeEdit.d.ts","sourcesContent":["/* Copyright Â© 2019 Softel vdm, Inc. - https://yetawf.com/Documentation/YetaWF/ComponentsHTML#License */\r\n\r\nnamespace YetaWF_ComponentsHTML {\r\n\r\n    export interface IPackageVolatiles {\r\n        DateTimeFormat: string;\r\n    }\r\n\r\n    interface DateTimeEditSetup {\r\n        Min: Date;\r\n        Max: Date;\r\n    }\r\n\r\n    export class DateTimeEditComponent extends YetaWF.ComponentBaseDataImpl {\r\n\r\n        public static readonly SELECTOR: string = \".yt_datetime.t_edit\";\r\n\r\n        Hidden: HTMLInputElement;\r\n        Date: HTMLInputElement;\r\n        kendoDateTimePicker: kendo.ui.DateTimePicker;\r\n\r\n        constructor(controlId: string, setup: DateTimeEditSetup) {\r\n            super(controlId);\r\n\r\n            this.Hidden = $YetaWF.getElement1BySelector(\"input[type=\\\"hidden\\\"]\", [this.Control]) as HTMLInputElement;\r\n            this.Date = $YetaWF.getElement1BySelector(\"input[name=\\\"dtpicker\\\"]\", [this.Control]) as HTMLInputElement;\r\n\r\n            $(this.Date).kendoDateTimePicker({\r\n                animation: false,\r\n                format: YVolatile.YetaWF_ComponentsHTML.DateTimeFormat,\r\n                min: setup.Min, max: setup.Max,\r\n                culture: YVolatile.Basics.Language,\r\n                change: (ev: kendo.ui.DateTimePickerEvent): void => {\r\n                    var kdPicker: kendo.ui.DateTimePicker = ev.sender;\r\n                    var val: Date = kdPicker.value();\r\n                    if (val == null)\r\n                        this.setHiddenText(kdPicker.element.val() as string);\r\n                    else\r\n                        this.setHidden(val);\r\n                    FormsSupport.validateElement(this.Hidden);\r\n                }\r\n            });\r\n            this.kendoDateTimePicker = $(this.Date).data(\"kendoDateTimePicker\");\r\n            this.setHidden(this.kendoDateTimePicker.value());\r\n\r\n            this.Date.addEventListener(\"change\", (event: Event): void => {\r\n                var val: Date = this.kendoDateTimePicker.value();\r\n                if (val == null)\r\n                    this.setHiddenText((event.target as HTMLInputElement).value);\r\n                else\r\n                    this.setHidden(val);\r\n                FormsSupport.validateElement(this.Hidden);\r\n            }, false);\r\n        }\r\n        private setHidden(dateVal: Date | null): void {\r\n            var s: string = \"\";\r\n            if (dateVal != null)\r\n                s = dateVal.toISOString();\r\n            this.Hidden.setAttribute(\"value\", s);\r\n        }\r\n        private setHiddenText(dateVal: string | null): void {\r\n            this.Hidden.setAttribute(\"value\", dateVal ? dateVal : \"\");\r\n        }\r\n        get value(): Date {\r\n            return new Date(this.Hidden.value);\r\n        }\r\n        get valueText(): string {\r\n            return this.Hidden.value;\r\n        }\r\n        set value(val: Date) {\r\n            this.setHidden(val);\r\n            this.kendoDateTimePicker.value(val);\r\n        }\r\n        public clear(): void {\r\n            this.setHiddenText(\"\");\r\n            this.kendoDateTimePicker.value(\"\");\r\n        }\r\n        public enable(enabled: boolean): void {\r\n            this.kendoDateTimePicker.enable(enabled);\r\n        }\r\n    }\r\n\r\n    // A <div> is being emptied. Destroy all controls the <div> may contain.\r\n    $YetaWF.registerClearDiv((tag: HTMLElement): void => {\r\n        YetaWF.ComponentBaseDataImpl.clearDiv<DateTimeEditComponent>(tag, DateTimeEditComponent.SELECTOR, (control: DateTimeEditComponent): void => {\r\n            control.kendoDateTimePicker.destroy();\r\n        });\r\n    });\r\n}\r\n\r\n"]}