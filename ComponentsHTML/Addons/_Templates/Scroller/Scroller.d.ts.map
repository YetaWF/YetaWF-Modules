{"version":3,"sources":["AddOns/YetaWF/ComponentsHTML/_Templates/Scroller/Scroller.ts"],"names":[],"mappings":"AAEA,kBAAU,qBAAqB,CAAC;IAK5B,MAAa,iBAAkB,SAAQ,MAAM,CAAC,qBAAqB;QAE/D,gBAAuB,QAAQ,EAAE,MAAM,CAA4B;QACnE,OAAO,CAAC,KAAK,CAAa;QAC1B,OAAO,CAAC,MAAM,CAAS;QACvB,OAAO,CAAC,QAAQ,CAAc;QAC9B,OAAO,CAAC,SAAS,CAAc;QAC/B,OAAO,CAAC,QAAQ,CAAiB;oBAErB,SAAS,EAAE,MAAM;QAuBtB,aAAa,IAAI,IAAI;QAerB,MAAM,CAAC,SAAS,EAAE,MAAM,GAAG,IAAI;KA0BzC;CAcJ","file":"Scroller.d.ts","sourcesContent":["/* Copyright Â© 2019 Softel vdm, Inc. - https://yetawf.com/Documentation/YetaWF/ComponentsHTML#License */\r\n\r\nnamespace YetaWF_ComponentsHTML {\r\n\r\n    //interface Setup {\r\n    //}\r\n\r\n    export class ScrollerComponent extends YetaWF.ComponentBaseDataImpl {\r\n\r\n        public static readonly SELECTOR: string = \".yt_scroller.t_display\";\r\n        private Panel: number = 0;\r\n        private Panels: number;\r\n        private ElemLeft: HTMLElement;\r\n        private ElemRight: HTMLElement;\r\n        private DivItems: HTMLDivElement;\r\n\r\n        constructor(controlId: string/*, setup: Setup*/) {\r\n            super(controlId);\r\n            //this.Setup = setup;\r\n\r\n            this.ElemLeft = $YetaWF.getElement1BySelector(\".t_left\", [this.Control]);\r\n            this.ElemRight = $YetaWF.getElement1BySelector(\".t_right\", [this.Control]);\r\n            this.Panels = $YetaWF.getElementsBySelector(\".t_item\", [this.Control]).length;\r\n            this.DivItems = $YetaWF.getElement1BySelector(\".t_items\", [this.Control]) as HTMLDivElement;\r\n\r\n            this.DivItems.style.left = \"0px\";\r\n\r\n            $YetaWF.registerEventHandler(this.ElemLeft, \"click\", null, (ev: MouseEvent): boolean => {\r\n                this.scroll(-1);\r\n                return false;\r\n            });\r\n            $YetaWF.registerEventHandler(this.ElemRight, \"click\", null, (ev: MouseEvent): boolean => {\r\n                this.scroll(1);\r\n                return false;\r\n            });\r\n        }\r\n\r\n        // API\r\n\r\n        public updateButtons(): void {\r\n\r\n            this.ElemLeft.style.backgroundPosition = this.Panel === 0 ? \"0px 0px\" : \"0px -48px\";\r\n            $YetaWF.elementEnableToggle(this.ElemLeft, this.Panel !== 0);\r\n\r\n            var controlRect = this.Control.getBoundingClientRect();\r\n            var width = controlRect.width;\r\n\r\n            var itemRect = $YetaWF.getElement1BySelector(\".t_item\", [this.Control]).getBoundingClientRect();\r\n            var itemwidth = itemRect.width;\r\n\r\n            var skip = Math.floor(width / itemwidth);\r\n            this.ElemRight.style.backgroundPosition = this.Panel + skip < this.Panels ? \"-48px -48px\" : \"-48px 0px\";\r\n            $YetaWF.elementEnableToggle(this.ElemRight, this.Panel + skip < this.Panels);\r\n        }\r\n        public scroll(direction: number): void {\r\n\r\n            var controlRect = this.Control.getBoundingClientRect();\r\n            var width = controlRect.width;\r\n\r\n            var itemRect = $YetaWF.getElement1BySelector(\".t_item\", [this.Control]).getBoundingClientRect();\r\n            var itemwidth = itemRect.width;\r\n\r\n            var skip = Math.floor(width / itemwidth);\r\n            if (skip < 1) skip = 1;\r\n            this.Panel = this.Panel + skip * direction;\r\n            //if (this.Panel >= this.Panels - skip) this.Panel %= this.Panels;\r\n            //if (this.Panel < 0) this.Panel = this.Panels + this.Panel;\r\n            if (this.Panel >= this.Panels) this.Panel = this.Panels - skip;\r\n            if (this.Panel < 0) this.Panel = 0;\r\n\r\n            this.updateButtons();\r\n\r\n            var offs = this.Panel * itemwidth;\r\n            this.DivItems.style.transition = \"all 250ms\";\r\n            this.DivItems.style.left = `${-offs}px`;\r\n\r\n            //$('.t_items', this.Control).animate({\r\n            //    left: -offs,\r\n            //}, 250, function () { });\r\n        }\r\n    }\r\n\r\n    $YetaWF.addWhenReady((tag: HTMLElement): void => {\r\n        var scrollers = $YetaWF.getElementsBySelector(ScrollerComponent.SELECTOR);\r\n        for (let scroller of scrollers) {\r\n            var scr = ScrollerComponent.getControlFromTag<ScrollerComponent>(scroller, ScrollerComponent.SELECTOR);\r\n            scr.updateButtons();\r\n        }\r\n    });\r\n\r\n    // A <div> is being emptied. Destroy all controls the <div> may contain.\r\n    $YetaWF.registerClearDiv((tag: HTMLElement): void => {\r\n        ScrollerComponent.clearDiv(tag, ScrollerComponent.SELECTOR);\r\n    });\r\n}\r\n"]}