{"version":3,"sources":["AddOns/YetaWF/Basics/_Addons/MailToObfuscator/MailToObfuscator.ts"],"names":[],"mappings":"AAEA,kBAAU,aAAa,CAAC;IAEpB,MAAa,0BAA0B;QAEnC,OAAc,EAAE,EAAE,OAAO,CAAQ;KAEpC;CAgCJ","file":"MailToObfuscator.d.ts","sourcesContent":["/* Copyright Â© 2019 Softel vdm, Inc. - https://yetawf.com/Documentation/YetaWF/Basics#License */\r\n\r\nnamespace YetaWF_Basics {\r\n\r\n    export class MailtoObfuscatorSkinModule {\r\n\r\n        public static on: boolean = true;\r\n\r\n    }\r\n\r\n    // http://stackoverflow.com/questions/483212/effective-method-to-hide-email-from-spam-bots\r\n    $YetaWF.addWhenReady((tag: HTMLElement): void => {\r\n        if (MailtoObfuscatorSkinModule.on) {\r\n            // find all <a> YGenMailTo tags and format an email address\r\n            var elems = $YetaWF.getElementsBySelector(\"a.YGenMailTo\", [tag]) as HTMLAnchorElement[];\r\n            for (var elem of elems) {\r\n                var addr = $YetaWF.getAttribute(elem, \"data-name\") + \"@\" + $YetaWF.getAttribute(elem, \"data-domain\");\r\n                var s = \"mailto:\" + addr;\r\n\r\n                var subj = $YetaWF.getAttributeCond(elem, \"data-subject\");\r\n                if (subj) {\r\n                    subj = subj.replace(\" \", \"+\");\r\n                    s += \"?subject=\" + encodeURI(subj);\r\n                }\r\n                var text = $YetaWF.getAttributeCond(elem, \"data-text\");\r\n                if (!text)\r\n                    elem.innerText = addr;\r\n                else\r\n                    elem.innerText = text;\r\n                elem.href = s;\r\n            }\r\n        }\r\n    });\r\n\r\n    // Handles events turning the addon on/off (used for dynamic content)\r\n    $YetaWF.registerContentChange((addonGuid: string, on: boolean): void => {\r\n        if (addonGuid === \"749d0ca9-75e5-40b8-82e3-466a11d3b1d2\") {\r\n            MailtoObfuscatorSkinModule.on = on;\r\n        }\r\n    });\r\n}"]}