{"version":3,"sources":["AddOns/YetaWF/BootstrapCarousel/_Templates/SlideShow/SlideShowEdit.ts"],"names":[],"mappings":"AAEA,kBAAU,MAAM,CAAC;IACb,UAAiB,QAAQ;QACrB,wBAAwB,EAAE,wBAAwB,CAAC,eAAe,CAAC;KACtE;IACD,UAAiB,KAAK;QAClB,wBAAwB,EAAE,wBAAwB,CAAC,YAAY,CAAC;KACnE;CACJ;AAED,kBAAU,wBAAwB,CAAC;IAE/B,UAAiB,eAAe;QAC5B,YAAY,EAAE,MAAM,CAAC;QACrB,eAAe,EAAE,MAAM,CAAC;QACxB,gBAAgB,EAAE,MAAM,CAAC;QACzB,UAAU,EAAE,MAAM,CAAC;QACnB,aAAa,EAAE,MAAM,CAAC;QACtB,aAAa,EAAE,MAAM,CAAC;KACzB;IACD,UAAiB,YAAY;QACzB,aAAa,EAAE,MAAM,CAAC;QACtB,WAAW,EAAE,MAAM,CAAC;KACvB;IAED,MAAa,aAAc,SAAQ,MAAM,CAAC,qBAAqB;QAE3D,gBAAuB,QAAQ,EAAE,MAAM,CAA4C;QACnF,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAgD;QAEpF,OAAO,CAAC,QAAQ,CAAc;QAC9B,OAAO,CAAC,UAAU,CAAc;QAChC,OAAO,CAAC,YAAY,CAAc;oBAEtB,SAAS,EAAE,MAAM;QA2C7B,OAAO,CAAC,YAAY;QAGpB,OAAO,CAAC,aAAa;QAIrB,OAAO,CAAC,aAAa;QAKrB,OAAO,CAAC,aAAa;QAad,eAAe,CAAC,KAAK,EAAE,WAAW,GAAG,IAAI;KAQnD;CAYJ","file":"SlideShowEdit.d.ts","sourcesContent":["/* Copyright Â© 2019 Softel vdm, Inc. - https://yetawf.com/Documentation/YetaWF/BootstrapCarousel#License */\r\n\r\nnamespace YetaWF {\r\n    export interface IConfigs {\r\n        YetaWF_BootstrapCarousel: YetaWF_BootstrapCarousel.IPackageConfigs;\r\n    }\r\n    export interface ILocs {\r\n        YetaWF_BootstrapCarousel: YetaWF_BootstrapCarousel.IPackageLocs;\r\n    }\r\n}\r\n\r\nnamespace YetaWF_BootstrapCarousel {\r\n\r\n    export interface IPackageConfigs {\r\n        Action_Apply: string;\r\n        Action_MoveLeft: string;\r\n        Action_MoveRight: string;\r\n        Action_Add: string;\r\n        Action_Insert: string;\r\n        Action_Remove: string;\r\n    }\r\n    export interface IPackageLocs {\r\n        RemoveConfirm: string;\r\n        RemoveTitle: string;\r\n    }\r\n\r\n    export class SlideShowEdit extends YetaWF.ComponentBaseDataImpl {\r\n\r\n        public static readonly SELECTOR: string = \".yt_bootstrapcarousel_slideshow.t_edit\";\r\n        private static readonly TEMPLATENAME: string = \"YetaWF_BootstrapCarousel_SlideShow\";\r\n\r\n        private buttonUp: HTMLElement;\r\n        private buttonDown: HTMLElement;\r\n        private buttonDelete: HTMLElement;\r\n\r\n        constructor(controlId: string) {\r\n            super(controlId);\r\n\r\n            this.buttonUp = $YetaWF.getElement1BySelector(\"input.t_up\", [this.Control]);\r\n            this.buttonDown = $YetaWF.getElement1BySelector(\"input.t_down\", [this.Control]);\r\n            this.buttonDelete = $YetaWF.getElement1BySelector(\"input.t_delete\", [this.Control]);\r\n\r\n            // Apply button click\r\n            $YetaWF.registerEventHandler(this.Control, \"click\", \"input.t_apply\", (ev: MouseEvent): boolean => {\r\n                $YetaWF.Forms.submitTemplate(this.Control, true, SlideShowEdit.TEMPLATENAME, YConfigs.YetaWF_BootstrapCarousel.Action_Apply, this.getPanelIndex().toString());\r\n                return false;\r\n            });\r\n            // << button click\r\n            $YetaWF.registerEventHandler(this.buttonUp, \"click\", null, (ev: MouseEvent): boolean => {\r\n                $YetaWF.Forms.submitTemplate(this.Control, true, SlideShowEdit.TEMPLATENAME, YConfigs.YetaWF_BootstrapCarousel.Action_MoveLeft, this.getPanelIndex().toString());\r\n                return false;\r\n            });\r\n            // >> button click\r\n            $YetaWF.registerEventHandler(this.buttonDown, \"click\", null, (ev: MouseEvent): boolean => {\r\n                $YetaWF.Forms.submitTemplate(this.Control, true, SlideShowEdit.TEMPLATENAME, YConfigs.YetaWF_BootstrapCarousel.Action_MoveRight, this.getPanelIndex().toString());\r\n                return false;\r\n            });\r\n            // delete button click\r\n            $YetaWF.registerEventHandler(this.buttonDelete, \"click\", null, (ev: MouseEvent): boolean => {\r\n                $YetaWF.alertYesNo(YLocs.YetaWF_BootstrapCarousel.RemoveConfirm, YLocs.YetaWF_BootstrapCarousel.RemoveTitle, (): void => {\r\n                    $YetaWF.Forms.submitTemplate(this.Control, false, SlideShowEdit.TEMPLATENAME, YConfigs.YetaWF_BootstrapCarousel.Action_Remove, this.getPanelIndex().toString());\r\n                });\r\n                return false;\r\n            });\r\n            // Insert button click\r\n            $YetaWF.registerEventHandler(this.Control, \"click\", \"input.t_ins\", (ev: MouseEvent): boolean => {\r\n                $YetaWF.Forms.submitTemplate(this.Control, true, SlideShowEdit.TEMPLATENAME, YConfigs.YetaWF_BootstrapCarousel.Action_Insert, this.getPanelIndex().toString());\r\n                return false;\r\n            });\r\n            // Add button click\r\n            $YetaWF.registerEventHandler(this.Control, \"click\", \"input.t_add\", (ev: MouseEvent): boolean => {\r\n                $YetaWF.Forms.submitTemplate(this.Control, true, SlideShowEdit.TEMPLATENAME, YConfigs.YetaWF_BootstrapCarousel.Action_Add, this.getPanelIndex().toString());\r\n                return false;\r\n            });\r\n\r\n            this.updateButtons();\r\n        }\r\n\r\n        private getActiveTab(): HTMLInputElement {\r\n            return $YetaWF.getElement1BySelector(\"input[name$='_ActiveTab']\", [this.Control]) as HTMLInputElement;\r\n        }\r\n        private getPanelIndex(): number {\r\n            var activeTab = this.getActiveTab();\r\n            return Number(activeTab.value);\r\n        }\r\n        private getPanelCount(): number {\r\n            var lis = $YetaWF.getElementsBySelector(\".t_tabstrip li\", [this.Control]);\r\n            return lis.length;\r\n        }\r\n\r\n        private updateButtons(): void {\r\n\r\n            var panelIndex = this.getPanelIndex();\r\n            var panelCount = this.getPanelCount();\r\n\r\n            // disable the << button if the active tab is the first one\r\n            $YetaWF.elementEnableToggle(this.buttonUp, panelIndex !== 0);\r\n            // disable the >> button if the last panel is active\r\n            $YetaWF.elementEnableToggle(this.buttonDown, panelIndex < panelCount - 1);\r\n            // disable if there is only one panel\r\n            $YetaWF.elementEnableToggle(this.buttonDelete, panelCount > 1);\r\n        }\r\n\r\n        public updateActiveTab(panel: HTMLElement): void {\r\n\r\n            // TODO:$$$ This needs to be moved into the tab control\r\n            var activeTab = $YetaWF.getElement1BySelector(\"input[name$='_ActiveTab']\", [this.Control]) as HTMLInputElement;\r\n            activeTab.value = $YetaWF.getAttribute(panel, \"data-tab\");\r\n\r\n            this.updateButtons();\r\n        }\r\n    }\r\n\r\n    $YetaWF.registerPanelSwitched((panel: HTMLElement): void => {\r\n        var ctrl = YetaWF.ComponentBaseDataImpl.getControlFromTagCond<SlideShowEdit>(panel, SlideShowEdit.SELECTOR);\r\n        if (ctrl != null)\r\n            ctrl.updateActiveTab(panel);\r\n    });\r\n\r\n    // A <div> is being emptied. Destroy all controls the <div> may contain.\r\n    $YetaWF.registerClearDiv((tag: HTMLElement): void => {\r\n        YetaWF.ComponentBaseDataImpl.clearDiv(tag, SlideShowEdit.SELECTOR);\r\n    });\r\n}"]}