@*Copyright © 2017 Softel vdm, Inc. - https://yetawf.com/Documentation/YetaWF/SyntaxHighlighter#License*@
@inherits YetaWF.Core.Views.RazorView<YetaWF.Modules.SyntaxHighlighter.Modules.SkinSyntaxHighlighterModule, YetaWF.Modules.SyntaxHighlighter.Controllers.SkinSyntaxHighlighterModuleController.Model>
@using YetaWF.Core.Addons
@using YetaWF.Core.Packages
@using YetaWF.Modules.SyntaxHighlighter.Controllers
@{
    // initial initialization
    YetaWF.Core.Skins.SkinAccess skinAccess = new YetaWF.Core.Skins.SkinAccess();
    string skin = Manager.CurrentPage.SyntaxHighlighterSkin;
    if (string.IsNullOrWhiteSpace(skin)) {
        skin = Manager.CurrentSite.SyntaxHighlighterSkin;
    }
    string internalTheme = skinAccess.FindSyntaxHighlighterSkin(skin);

    Manager.AddOnManager.AddTemplate("TextArea");/*TODO: Why?*/
    Package package = AreaRegistration.CurrentPackage;
    Manager.AddOnManager.AddAddOn(package.Domain, package.Product, "SkinSyntaxHighlighter", internalTheme);

    string url = VersionManager.GetAddOnModuleUrl(package.Domain, package.Product, "SkinSyntaxHighlighter");
    Manager.ScriptManager.AddLast("AlexGorbatchevCom_SyntaxHighlighter", "AlexGorbatchevCom_SyntaxHighlighter.Init('" + url + "');");
}